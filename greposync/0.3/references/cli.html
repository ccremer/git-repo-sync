<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Command Line Interface (CLI) :: greposync docs</title>
    <meta name="generator" content="Antora 3.0.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://ccremer.github.io/greposync">greposync docs</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="greposync" data-version="0.3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">greposync</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><a href="https://github.com/ccremer/greposync/releases" target="_blank" rel="noopener">Changelog</a></span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorials/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorials/getting-started.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorials/create-pr.html">Create a PR</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorials/setup-test-cases.html">Setup Test Cases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How To</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/inherit-value.html">Inherit values in directories</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/ignore-file.html">Ignore file in a repository</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/delete-file.html">Remove file in a specific repository</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/delete-files.html">Remove files in all repositories</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/comment-files.html">Add comment headers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/sync-labels.html">Sync labels in all repositories</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/test-template.html">Test rendering with test cases</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/migrate-from-modulesync.html">Migrate from ModuleSync</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Technical reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="template.html">Template</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="greposync.html">Main Configuration</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="cli.html">Command Line Interface (CLI)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="sync-config.html">Sync Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testing-mode.html">Testing Mode</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Explanation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../explanations/deep-merge.html">Configuration deep merge</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../explanations/feature-comparison.html">Feature comparison with ModuleSync</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developer Guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../developer-guide/intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../developer-guide/ref-domain.html">Godoc: Domain</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">greposync</span>
    <span class="version">0.3-rc4</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../0.2/index.html">greposync</a>
      <ul class="versions">
        <li class="version">
          <a href="../../index.html">master</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">0.3-rc4</a>
        </li>
        <li class="version is-latest">
          <a href="../../0.2/index.html">0.2</a>
        </li>
        <li class="version">
          <a href="../../0.1/index.html">0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../0.2/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">greposync</a></li>
    <li>Technical reference</li>
    <li><a href="cli.html">Command Line Interface (CLI)</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">0.3-rc4</button>
  <div class="version-menu">
    <a class="version" href="../../references/cli.html">master</a>
    <a class="version is-current" href="cli.html">0.3-rc4</a>
    <a class="version is-missing" href="../../0.2/index.html">0.2</a>
    <a class="version is-missing" href="../../0.1/index.html">0.1</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/ccremer/greposync/edit/docs/v0.3-rc/docs/modules/ROOT/pages/references/cli.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Command Line Interface (CLI)</h1>
<div class="listingblock">
<div class="title">Main command help output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ gsync --help
NAME:
   greposync - Managed Git repositories in bulk

USAGE:
   greposync [global options] command [command options] [arguments...]

VERSION:
   unknown, commit -dirty-, date

DESCRIPTION:
   At the heart of greposync is a template.
   The template exists of files that are being rendered with various input variables and ultimately committed to a Git repository.
   greposync enables you to keep multiple Git repositories aligned with all the skeleton files that you need.

   While services like GitHub offer the functionality of template repository, once you generated a new repository from the template it's not being updated anymore.
   Over time you'll do changes to your CI/CD workflows or Makefiles and you want the changes in all your popular repositories.
   greposync does just that.

COMMANDS:
   init     Initializes a template repository in the current working directory
   labels   Synchronizes repository labels
   update   Update the repositories in managed_repos.yml
   test     Test the rendered template against test cases
   help, h  Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --help, -h  show help (default: false)
   --version   print the version (default: false)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">init command help output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">NAME:
   greposync init - Initializes a template repository in the current working directory

USAGE:
   greposync init [command options] [arguments...]

DESCRIPTION:
   This command creates 'config_defaults.yml', 'managed_repositories.yml' and some template files with example content.
   If any file already exists, it will be left untouched.

OPTIONS:
   --template.root value  The path relative to the current workdir where the template files are located. (default: "template") [$G_TEMPLATE_ROOT_DIR]
   --help, -h             show help (default: false)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">update command help output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">NAME:
   greposync update - Update the repositories in managed_repos.yml

USAGE:
   greposync update [command options] [arguments...]

OPTIONS:
   --dry-run value               Select a dry run mode. Allowed values: offline (do not run any Git commands except initial clone), commit (commit, but don't push), push (push, but don't touch PRs) [$G_DRYRUN]
   --exclude value               Excludes repositories from updating that match the given filter (regex). Repositories matching both include and exclude filter are still excluded. [$G_EXCLUDE]
   --git.amend                   Amend previous commit. Requires --git.forcePush. (default: false) [$G_GIT_AMEND]
   --git.base value              Git base URL. (default: "git@github.com:") [$G_GIT_BASE]
   --git.commitBranch value      The branch name to create, switch to and commit locally. (default: "greposync-update") [$G_GIT_COMMIT_BRANCH]
   --git.commitMessage value     The commit message when committing an update. (default: "Update from greposync") [$G_GIT_COMMIT_MSG]
   --git.defaultNamespace value  The repository owner without the repository name. This is often a user or organization name in GitHub.com or GitLab.com. (default: "github.com") [$G_GIT_DEFAULT_NS]
   --git.forcePush               If push is enabled, push forcefully. (default: false) [$G_GIT_FORCEPUSH]
   --git.root value              Local relative directory path where git clones repositories into. (default: "repos") [$G_GIT_ROOT_DIR]
   --include value               Includes only repositories in the update that match the given filter (regex). The full URL (including scheme) is matched. [$G_INCLUDE]
   --jobs value, -j value        Jobs is the number of parallel jobs to run. 1 basically means that jobs are run in sequence. (default: 1) [$G_JOBS]
   --log.level value, -v value   Log level that increases verbosity with greater numbers. (default: 0) [$G_LOG_LEVEL]
   --log.showDiff                Show the Git Diff for each repository after committing. In --dry-run=offline mode the diff is showed for unstaged changes. (default: false) [$G_SHOW_DIFF]
   --log.showLog                 Shows the full log in real-time rather than keeping it hidden until an error occurred. (default: false) [$G_SHOW_LOG]
   --pr.body value               Markdown-enabled body of the PullRequest. It will load from an existing file if this is a path. Content can be templated. (default: "This Pull request updates this repository with changes from a greposync template repository.") [$G_PR_BODY]
   --pr.create                   Create a PullRequest on a supported git hoster after pushing to remote. (default: false) [$G_PR_CREATE]
   --pr.labels value             Array of issue labels to apply when creating a pull request. Labels on existing pull requests are not updated. It is not validated whether the labels exist, the API may or may not create non-existing labels dynamically.  (accepts multiple inputs) [$G_PR_LABELS]
   --pr.subject value            The Pull Request title. (default: "Update from greposync") [$G_PR_SUBJECT]
   --pr.targetBranch value       Remote branch name of the pull request. If left empty, it will target the default branch (usually 'master' or 'main'). [$G_PR_TARGET_BRANCH]
   --skipBroken                  Skip abort if a repository update encounters an error (default: false) [$G_SKIP_BROKEN]
   --template.root value         The path relative to the current workdir where the template files are located. (default: "template") [$G_TEMPLATE_ROOT_DIR]
   --help, -h                    show help (default: false)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">labels command help output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">NAME:
   greposync labels - Synchronizes repository labels

USAGE:
   greposync labels [command options] [arguments...]

OPTIONS:
   --exclude value               Excludes repositories from updating that match the given filter (regex). Repositories matching both include and exclude filter are still excluded. [$G_EXCLUDE]
   --git.commitBranch value      The branch name to create, switch to and commit locally. (default: "greposync-update") [$G_GIT_COMMIT_BRANCH]
   --git.defaultNamespace value  The repository owner without the repository name. This is often a user or organization name in GitHub.com or GitLab.com. (default: "github.com") [$G_GIT_DEFAULT_NS]
   --git.root value              Local relative directory path where git clones repositories into. (default: "repos") [$G_GIT_ROOT_DIR]
   --include value               Includes only repositories in the update that match the given filter (regex). The full URL (including scheme) is matched. [$G_INCLUDE]
   --jobs value, -j value        Jobs is the number of parallel jobs to run. 1 basically means that jobs are run in sequence. (default: 1) [$G_JOBS]
   --log.level value, -v value   Log level that increases verbosity with greater numbers. (default: 0) [$G_LOG_LEVEL]
   --log.showLog                 Shows the full log in real-time rather than keeping it hidden until an error occurred. (default: false) [$G_SHOW_LOG]
   --skipBroken                  Skip abort if a repository update encounters an error (default: false) [$G_SKIP_BROKEN]
   --help, -h                    show help (default: false)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">test command help output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">NAME:
   greposync test - Test the rendered template against test cases

USAGE:
   greposync test [command options] [arguments...]

DESCRIPTION:
   Test cases are defined as local, simulated repositories in 'tests' directory, where each subdirectory itself is a separate test case.
   The expected file structure should resemble this format:

   tests
   └── case-1
       ├── &lt;file&gt;
       └── .sync.yml

   'case-1' is the test case name.
   &lt;file&gt; represents any files that are to be rendered (for example README.md, Makefile etc.) with their contents being the desired output.
   '.sync.yml' is the sync config for this simulated repository and it works exactly as the .sync.yml syntax in real repositories.

   When running this subcommand, these test cases are picked up and its template output rendered in a new directory '.tests'.
   A 'git diff' will be computed and if it's non-empty, the test case is considered failed.

   This command can be used to verify that the template is correct before rolling it out to production repositories.

OPTIONS:
   --exclude value              Excludes repositories from updating that match the given filter (regex). Repositories matching both include and exclude filter are still excluded. [$G_EXCLUDE]
   --exit-code                  Exits app with exit code 3 if a test case failed. (default: false) [$G_EXIT_CODE]
   --git.root value             Local relative directory path where git clones repositories into. (default: "repos") [$G_GIT_ROOT_DIR]
   --include value              Includes only repositories in the update that match the given filter (regex). The full URL (including scheme) is matched. [$G_INCLUDE]
   --jobs value, -j value       Jobs is the number of parallel jobs to run. 1 basically means that jobs are run in sequence. (default: 1) [$G_JOBS]
   --log.level value, -v value  Log level that increases verbosity with greater numbers. (default: 0) [$G_LOG_LEVEL]
   --log.showLog                Shows the full log in real-time rather than keeping it hidden until an error occurred. (default: false) [$G_SHOW_LOG]
   --skipBroken                 Skip abort if a repository update encounters an error (default: false) [$G_SKIP_BROKEN]
   --template.root value        The path relative to the current workdir where the template files are located. (default: "template") [$G_TEMPLATE_ROOT_DIR]
   --help, -h                   show help (default: false)</code></pre>
</div>
</div>
</article>
  </div>
</main>
</div>
<!--
This page was built using the Antora default UI.
The source code for this UI is licensed under the terms of the MPL-2.0 license.
-->
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
