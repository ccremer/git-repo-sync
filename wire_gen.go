// Code generated by Wire. DO NOT EDIT.

//go:generate go run github.com/google/wire/cmd/wire
//+build !wireinject

package main

import (
	"github.com/ccremer/greposync/cfg"
	"github.com/ccremer/greposync/cli"
	"github.com/ccremer/greposync/core"
	"github.com/ccremer/greposync/core/gitrepo"
	"github.com/ccremer/greposync/core/pullrequest"
	rendering2 "github.com/ccremer/greposync/core/rendering"
	"github.com/ccremer/greposync/pkg/githosting/github"
	"github.com/ccremer/greposync/pkg/rendering"
	"github.com/ccremer/greposync/pkg/repository"
	"github.com/ccremer/greposync/pkg/valuestore"
)

// Injectors from wire.go:

func initInjector() *injector {
	versionInfo := _wireVersionInfoValue
	configuration := cfg.NewDefaultConfig()
	app := cli.NewApp(versionInfo, configuration)
	ghRemote := github.NewRemote()
	providerMap := newGitProviders(ghRemote)
	repositoryStore := repository.NewRepositoryStore(configuration, providerMap)
	prepareWorkspaceHandler := gitrepo.NewPrepareWorkspaceHandler(repositoryStore)
	goTemplateStore := rendering.NewGoTemplateStore(configuration)
	koanfValueStore := valuestore.NewValueStore()
	pullRequestHandler := pullrequest.NewPullRequestHandler(goTemplateStore, koanfValueStore)
	renderTemplatesHandler := rendering2.NewRenderTemplatesHandler(repositoryStore, goTemplateStore, koanfValueStore)
	mainInjector := NewInjector(app, prepareWorkspaceHandler, pullRequestHandler, renderTemplatesHandler)
	return mainInjector
}

var (
	_wireVersionInfoValue = cli.VersionInfo{Version: version, Commit: commit, Date: date}
)

// wire.go:

type injector struct {
	prepareWorkspaceHandler *gitrepo.PrepareWorkspaceHandler
	pullRequestHandler      *pullrequest.PullRequestHandler
	app                     *cli.App
	renderTemplatesHandler  core.EventHandler
}

func NewInjector(
	app *cli.App,
	pwh *gitrepo.PrepareWorkspaceHandler,
	prh *pullrequest.PullRequestHandler,
	rth *rendering2.RenderTemplatesHandler,
) *injector {
	i := &injector{
		prepareWorkspaceHandler: pwh,
		pullRequestHandler:      prh,
		renderTemplatesHandler:  rth,
		app:                     app,
	}
	return i
}

func (i *injector) RegisterHandlers() {
	core.RegisterHandler(gitrepo.PrepareWorkspaceEvent, i.prepareWorkspaceHandler)
	core.RegisterHandler(pullrequest.EnsurePullRequestEvent, i.pullRequestHandler)
	core.RegisterHandler(rendering2.RenderTemplatesEvent, i.renderTemplatesHandler)
}

func (i *injector) RunApp() {
	i.app.Run()
}

func newGitProviders(ghRemote *github.GhRemote) repository.ProviderMap {
	return repository.ProviderMap{github.GitHubProviderKey: ghRemote}
}
